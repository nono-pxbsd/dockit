#!/bin/bash

SCRIPT_DIR="$( cd "$( dirname "$(readlink -f "${BASH_SOURCE[0]}" )" )" && pwd )"

# Couleurs
GREEN="\e[32m"
CYAN="\e[36m"
BOLD="\e[1m"
RESET="\e[0m"

# Aide
if [[ "$1" == "--help" ]] || [[ "$1" == "-h" ]]; then
  echo -e "${BOLD}${CYAN}Dockit ‚Äî G√©n√©rateur d'environnements de d√©veloppement${RESET}"
  echo ""
  echo "Usage: $0 [OPTIONS]"
  echo ""
  echo "Options:"
  echo "  --auto, -y    Mode automatique (r√©pond 'oui' aux √©tapes non critiques)"
  echo "  --help, -h    Affiche cette aide"
  echo ""
  echo "Le mode automatique sera transmis √† l'environnement s√©lectionn√©."
  exit 0
fi

clear
echo -e "${BOLD}${CYAN}üöÄ Dockit ‚Äî G√©n√©rateur d'environnements de d√©veloppement${RESET}"
echo ""

echo "üõ†Ô∏è  Que souhaitez-vous lancer ?"
CHOICE=$(echo -e "PrestaShop\nWordPress (bient√¥t)\nSymfony (bient√¥t)" | fzf --prompt "Votre choix : " --height 7 --border --ansi)

case "$CHOICE" in
  "PrestaShop")
    # echo "üìÇ Ex√©cution de PrestaShop depuis : $SCRIPT_DIR/prestashop-env"
    if [ -f "$SCRIPT_DIR/prestashop-env" ]; then
      # Passer tous les arguments au script prestashop-env
      bash "$SCRIPT_DIR/prestashop-env" "$@"
    else
      echo "‚ùå Erreur : Le script $SCRIPT_DIR/prestashop-env est introuvable."
      exit 1
    fi
    ;;
  "WordPress (bient√¥t)")
    echo "üöß WordPress : bient√¥t disponible."
    ;;
  "Symfony (bient√¥t)")
    echo "üöß Symfony : bient√¥t disponible."
    ;;
  *)
    echo "‚ùå Choix invalide."
    exit 1
    ;;
esac