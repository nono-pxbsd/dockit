#!/bin/bash

# Chargement des modules
SCRIPT_DIR="$( cd "$( dirname "$(readlink -f "${BASH_SOURCE[0]}" )" )" && pwd )"
ROOT_DIR="$(dirname "$SCRIPT_DIR")"
source "$ROOT_DIR/lib/dependencies.sh"
source "$ROOT_DIR/lib/project.sh"
source "$ROOT_DIR/lib/ports.sh"
source "$ROOT_DIR/lib/docker.sh"
source "$ROOT_DIR/lib/prompt.sh"
source "$ROOT_DIR/lib/env.sh"
source "$ROOT_DIR/lib/versions.sh"
source "$ROOT_DIR/lib/prestashop.sh"
source "$ROOT_DIR/lib/extensions.sh"
source "$ROOT_DIR/lib/utils.sh"

# Couleurs
GREEN="\e[32m"
RED="\e[31m"
CYAN="\e[36m"
YELLOW="\e[33m"
BOLD="\e[1m"
RESET="\e[0m"

# Mode automatique (--auto ou -y)
AUTO_MODE=false
if [[ "$1" == "--auto" ]] || [[ "$1" == "-y" ]]; then
  AUTO_MODE=true
  echo -e "${BOLD}${CYAN}üöÄ Mode automatique activ√©${RESET}"
elif [[ "$1" == "--help" ]] || [[ "$1" == "-h" ]]; then
  echo -e "${BOLD}${CYAN}PrestaShop Environment Setup${RESET}"
  echo ""
  echo "Usage: $0 [OPTIONS]"
  echo ""
  echo "Options:"
  echo "  --auto, -y    Mode automatique (r√©pond 'oui' aux √©tapes non critiques)"
  echo "  --help, -h    Affiche cette aide"
  echo ""
  echo "Mode automatique active automatiquement :"
  echo "  ‚Ä¢ T√©l√©chargement de PrestaShop"
  echo "  ‚Ä¢ Lancement de Docker Compose"
  echo "  ‚Ä¢ Installation des d√©pendances et compilation des assets"
  echo "  ‚Ä¢ Installation CLI de PrestaShop"
  echo "  ‚Ä¢ Mise √† jour des modules"
  echo ""
  echo "Les questions de configuration (nom, version, credentials) restent interactives."
  exit 0
fi

echo -e "${BOLD}${CYAN}üöÄ Welcome to the PrestaShop environment setup!${RESET}"

# V√©rification des d√©pendances n√©cessaires
check_dependencies

######################################
# √âtape 1 : Nom du projet
######################################
read -p "üìù Enter project name (letters, dashes, underscores, dots): " raw_project_name
PROJECT_NAME=$(sanitize_project_name "$raw_project_name") || exit 1
echo -e "‚úÖ Project name: ${GREEN}${PROJECT_NAME}${RESET}"

######################################
# √âtape 1.5 : Choix du dossier racine
######################################
read -p "üìÅ O√π souhaitez-vous cr√©er le projet ? [/var/www] : " BASE_DIR_INPUT
BASE_DIR=$(normalize_path "${BASE_DIR_INPUT:-/var/www}")
PROJECT_DIR=$(normalize_path "$BASE_DIR/$PROJECT_NAME")
echo -e "üìÇ R√©pertoire du projet : ${GREEN}$PROJECT_DIR${RESET}"

if [ ! -d "$PROJECT_DIR" ]; then
  echo "üìÇ Cr√©ation du r√©pertoire du projet : $PROJECT_DIR"
  mkdir -p "$PROJECT_DIR" || { echo "‚ùå Impossible de cr√©er le r√©pertoire $PROJECT_DIR"; exit 1; }
fi

######################################
# √âtape 2 : Choix de la version PS
######################################
PS_VERSION=$(select_prestashop_version)
echo -e "‚úÖ Selected PrestaShop version: ${GREEN}${PS_VERSION}${RESET}"

######################################
# √âtape 3 : Stack recommand√©e
######################################
read -r PHP_VERSION MARIADB_VERSION NODE_VERSION <<< "$(get_stack_for_ps_version "$PS_VERSION")"
THEME_NAME=$(get_theme_for_ps_version "$PS_VERSION")
echo -e "üß© Stack recommand√©e ‚Üí PHP: ${GREEN}${PHP_VERSION}${RESET}, MariaDB: ${GREEN}${MARIADB_VERSION}${RESET}, Node: ${GREEN}${NODE_VERSION}${RESET}, Th√®me: ${GREEN}${THEME_NAME}${RESET}"

######################################
# √âtape 4 : S√©lection des extensions PHP
######################################
selected_extensions=$(select_php_extensions "$PHP_VERSION") || exit 1
PHP_EXTENSIONS=$(format_extensions_for_env "$selected_extensions")

######################################
# √âtape 5 : D√©tection automatique des ports
######################################
read -p "üìç Port de base (ex: 10000) [10000] : " BASE_PORT_INPUT
BASE_PORT=${BASE_PORT_INPUT:-10000}

WEB_HTTP_PORT=$(find_free_port "$BASE_PORT")
WEB_HTTPS_PORT=$(find_free_port $((WEB_HTTP_PORT + 1)))
PHPMYADMIN_PORT=$(find_free_port $((WEB_HTTPS_PORT + 1)))
MAILPIT_PORT=$(find_free_port $((PHPMYADMIN_PORT + 1)))
DB_PORT=$(find_free_port $((MAILPIT_PORT + 1)))

echo -e "üß† Ports assign√©s :"
echo "   üåê HTTP         : $WEB_HTTP_PORT"
echo "   üîê HTTPS        : $WEB_HTTPS_PORT"
echo "   üõ¢Ô∏è PhpMyAdmin   : $PHPMYADMIN_PORT"
echo "   üì¨ Mailpit      : $MAILPIT_PORT"
echo "   üê¨ MySQL        : $DB_PORT"

######################################
# √âtape 6 : D√©tection de la plateforme Docker
######################################
DOCKER_PLATFORM=$(detect_docker_platform)
echo -e "üì¶ Docker Platform : ${GREEN}${DOCKER_PLATFORM}${RESET}"

######################################
# √âtape 7 : Nom des r√©pertoires dynamiques
######################################
read -p "üìÇ Nom du r√©pertoire pour les sources (par d√©faut : ps_sources) : " PS_SOURCES_DIR
PS_SOURCES_DIR=$(normalize_path "$PROJECT_DIR/${PS_SOURCES_DIR:-ps_sources}")

read -p "üìÇ Nom du r√©pertoire pour les logs (par d√©faut : ps_logs) : " PS_LOGS_DIR
PS_LOGS_DIR=$(normalize_path "$PROJECT_DIR/${PS_LOGS_DIR:-ps_logs}")

read -p "üìÇ Nom du r√©pertoire pour la base de donn√©es (par d√©faut : ps_db) : " PS_DB_DIR
PS_DB_DIR=$(normalize_path "$PROJECT_DIR/${PS_DB_DIR:-ps_db}")

echo -e "‚úÖ R√©pertoires d√©finis :"
echo -e "   Sources : ${GREEN}${PS_SOURCES_DIR}${RESET}"
echo -e "   Logs    : ${GREEN}${PS_LOGS_DIR}${RESET}"
echo -e "   DB      : ${GREEN}${PS_DB_DIR}${RESET}"

######################################
# √âtape 6.5 : Configuration de la base de donn√©es et PrestaShop
######################################
echo ""
echo -e "${BOLD}${CYAN}Configuration de la base de donn√©es${RESET}"

read -p "üìä Nom de la base de donn√©es [prestashop] : " DB_NAME_INPUT
DB_NAME=${DB_NAME_INPUT:-prestashop}

read -p "üë§ Utilisateur de la base de donn√©es [prestashop] : " DB_USER_INPUT
DB_USER=${DB_USER_INPUT:-prestashop}

read -p "üîê Mot de passe de la base de donn√©es [prestashop] : " DB_PASSWORD_INPUT
DB_PASSWORD=${DB_PASSWORD_INPUT:-prestashop}

echo ""
echo -e "${BOLD}${CYAN}Configuration de l'administrateur PrestaShop${RESET}"

read -p "üìß Email de l'administrateur [admin@example.com] : " ADMIN_EMAIL_INPUT
ADMIN_EMAIL=${ADMIN_EMAIL_INPUT:-admin@example.com}

read -p "üîê Mot de passe de l'administrateur [admin123] : " ADMIN_PASSWORD_INPUT
ADMIN_PASSWORD=${ADMIN_PASSWORD_INPUT:-admin123}

read -p "üåç Langue du shop [fr] : " SHOP_LANGUAGE_INPUT
SHOP_LANGUAGE=${SHOP_LANGUAGE_INPUT:-fr}

read -p "üïê Timezone [Europe/Paris] : " SHOP_TIMEZONE_INPUT
SHOP_TIMEZONE=${SHOP_TIMEZONE_INPUT:-Europe/Paris}

echo -e "‚úÖ Configuration enregistr√©e"

######################################
# √âtape 7 : G√©n√©ration du fichier .env
######################################
ENV_TEMPLATE="$ROOT_DIR/.env.default"
ENV_TARGET="$PROJECT_DIR/.env"

# D√©tection automatique de l'UID et GID de l'utilisateur courant
USER_UID=$(id -u)
USER_GID=$(id -g)

generate_env_file "$ENV_TEMPLATE" "$ENV_TARGET" \
  "PROJECT_NAME=$PROJECT_NAME" \
  "PROJECT_DIR=$PROJECT_DIR" \
  "PS_VERSION=$PS_VERSION" \
  "PHP_VERSION=$PHP_VERSION" \
  "NODE_VERSION=$NODE_VERSION" \
  "THEME_NAME=$THEME_NAME" \
  "MARIADB_VERSION=$MARIADB_VERSION" \
  "WEB_HTTP_PORT=$WEB_HTTP_PORT" \
  "WEB_HTTPS_PORT=$WEB_HTTPS_PORT" \
  "PHPMYADMIN_PORT=$PHPMYADMIN_PORT" \
  "MAILPIT_PORT=$MAILPIT_PORT" \
  "DB_PORT=$DB_PORT" \
  "DOCKER_PLATFORM=$DOCKER_PLATFORM" \
  "PHP_EXTENSIONS=$PHP_EXTENSIONS" \
  "PS_SOURCES_DIR=$PS_SOURCES_DIR" \
  "PS_LOGS_DIR=$PS_LOGS_DIR" \
  "PS_DB_DIR=$PS_DB_DIR" \
  "UID=$USER_UID" \
  "GID=$USER_GID" \
  "DB_NAME=$DB_NAME" \
  "DB_USER=$DB_USER" \
  "DB_PASSWORD=$DB_PASSWORD" \
  "ADMIN_EMAIL=$ADMIN_EMAIL" \
  "ADMIN_PASSWORD=$ADMIN_PASSWORD" \
  "SHOP_LANGUAGE=$SHOP_LANGUAGE" \
  "SHOP_TIMEZONE=$SHOP_TIMEZONE"

if [ ! -f "$ENV_TARGET" ]; then
  echo "‚ùå Le fichier .env n'a pas √©t√© g√©n√©r√©."
  exit 1
fi

echo -e "‚úÖ ${GREEN}Fichier .env g√©n√©r√© avec succ√®s :${RESET} $ENV_TARGET"

######################################
# √âtape 8 : G√©n√©ration des √©l√©ments propres √† Docker
######################################
DOCKER_COMPOSE_TEMPLATE="$ROOT_DIR/templates/prestashop/docker-compose.yml"
DOCKER_COMPOSE_TARGET="$PROJECT_DIR/docker-compose.yml"

echo -e "üìÑ G√©n√©ration du fichier docker-compose.yml..."
cp "$DOCKER_COMPOSE_TEMPLATE" "$DOCKER_COMPOSE_TARGET"

if [ -f "$DOCKER_COMPOSE_TARGET" ]; then
  echo -e "‚úÖ ${GREEN}Fichier docker-compose.yml g√©n√©r√© avec succ√®s :${RESET} $DOCKER_COMPOSE_TARGET"
else
  echo -e "‚ùå ${RED}Erreur lors de la g√©n√©ration du fichier docker-compose.yml.${RESET}"
  exit 1
fi

if [ ! -d "$PROJECT_DIR/.docker" ]; then
  cp -r "$ROOT_DIR/.docker" "$PROJECT_DIR/"
  echo -e "${GREEN}Dossier .docker copi√© dans le projet.${RESET}"
else
  echo -e "${YELLOW}‚ö†Ô∏è Le dossier .docker existe d√©j√† dans le projet. Copie ignor√©e.${RESET}"
fi

######################################
# √âtape 9 : T√©l√©chargement de PrestaShop
######################################
if [ "$AUTO_MODE" = true ]; then
  DOWNLOAD_PS="y"
  echo -e "üì• ${BOLD}T√©l√©chargement de PrestaShop ${PS_VERSION}...${RESET} (auto)"
else
  read -p "üì• Souhaitez-vous t√©l√©charger PrestaShop ${PS_VERSION} dans le projet ? (y/N) " DOWNLOAD_PS
fi

if [[ "$DOWNLOAD_PS" =~ ^[Yy]$ ]]; then
  download_and_extract_prestashop "$PS_VERSION" "$PS_SOURCES_DIR"

  # T√©l√©charger Hummingbird si c'est le th√®me par d√©faut pour cette version
  if [[ "$THEME_NAME" == "hummingbird" ]]; then
    HUMMINGBIRD_VERSION=$(get_hummingbird_version_for_ps "$PS_VERSION")
    download_and_extract_hummingbird "$HUMMINGBIRD_VERSION" "$PS_SOURCES_DIR"
  fi
else
  echo "‚è≠Ô∏è  √âtape ignor√©e."
fi

########################################
# √âtape 10 : Pr√©paration des r√©pertoires pour Docker
########################################
echo -e "üìÅ Cr√©ation des r√©pertoires n√©cessaires..."

# Cr√©er les r√©pertoires principaux s'ils n'existent pas
mkdir -p "$PS_SOURCES_DIR"
mkdir -p "$PS_DB_DIR"
mkdir -p "$PS_LOGS_DIR"

# Cr√©er les sous-r√©pertoires de logs pour les bind mounts
mkdir -p "$PS_LOGS_DIR/mailpit"
mkdir -p "$PS_LOGS_DIR/node"

echo -e "‚úÖ ${GREEN}R√©pertoires pr√™ts pour Docker${RESET}"

########################################
# √âtape 11 : Lancement du projet Docker
########################################

if [ "$AUTO_MODE" = true ]; then
  START_DOCKER="y"
  echo -e "üöÄ ${BOLD}Lancement de Docker Compose...${RESET} (auto)"
else
  read -r -p "üöÄ Souhaitez-vous lancer 'docker compose up -d' maintenant ? (y/N) " START_DOCKER
fi

if [[ "$START_DOCKER" =~ ^[Yy]$ ]]; then
  echo -e "üîß ${BOLD}cd \"$PROJECT_DIR\" && docker compose up -d${RESET}"
  cd "$PROJECT_DIR" && docker compose up -d
else
  echo -e "‚è≠Ô∏è  √âtape ignor√©e. Vous pouvez lancer manuellement :"
  echo -e "   ${BOLD}cd \"$PROJECT_DIR\" && docker compose up -d${RESET}"
fi

########################################
# √âtape 12 : Installation des d√©pendances et compilation des assets
########################################

if [[ "$DOWNLOAD_PS" =~ ^[Yy]$ ]] && [[ "$START_DOCKER" =~ ^[Yy]$ ]]; then
  echo ""
  if [ "$AUTO_MODE" = true ]; then
    RUN_INSTALL="y"
    echo -e "üî® ${BOLD}Installation des d√©pendances et compilation des assets...${RESET} (auto)"
  else
    read -r -p "üî® Souhaitez-vous installer les d√©pendances et compiler les assets ? (y/N) " RUN_INSTALL
  fi

  if [[ "$RUN_INSTALL" =~ ^[Yy]$ ]]; then
    if [ "$AUTO_MODE" != true ]; then
      echo -e "üî® ${BOLD}Installation des d√©pendances et compilation des assets...${RESET}"
      echo -e "‚è≥ Cela peut prendre plusieurs minutes..."
      echo ""
    fi

    # √âtape 1 : Composer dans le container PHP
    echo -e "üì¶ ${BOLD}Installation des d√©pendances Composer...${RESET}"
    docker exec "${PROJECT_NAME}_php" composer install --working-dir=/var/www/html --no-interaction --prefer-dist

    if [ $? -eq 0 ]; then
      echo -e "‚úÖ ${GREEN}D√©pendances Composer install√©es${RESET}"
    else
      echo -e "‚ùå ${RED}Erreur lors de l'installation Composer${RESET}"
      RUN_INSTALL="n"
    fi

    # √âtape 2 : Compilation des assets dans le container Node
    if [[ "$RUN_INSTALL" =~ ^[Yy]$ ]]; then
      echo ""
      echo -e "üé® ${BOLD}Compilation des assets (BO + Front)...${RESET}"

      # Compiler le BO (admin)
      echo -e "  üì¶ Compilation du Back Office..."
      docker exec -u node "${PROJECT_NAME}_node" bash /var/www/html/tools/assets/build.sh admin-default
      docker exec -u node "${PROJECT_NAME}_node" bash /var/www/html/tools/assets/build.sh admin-new-theme

      # Compiler le th√®me front selon la version
      if [[ "$THEME_NAME" == "hummingbird" ]]; then
        echo -e "  üê¶ Compilation du th√®me Hummingbird..."
        docker exec -u node "${PROJECT_NAME}_node" bash -c "cd /var/www/html/themes/hummingbird && npm install && npm run build"
      elif [[ "$THEME_NAME" == "classic" ]]; then
        echo -e "  üìò Compilation du th√®me Classic..."
        docker exec -u node "${PROJECT_NAME}_node" bash /var/www/html/tools/assets/build.sh front-classic
      fi

      if [ $? -eq 0 ]; then
        echo -e "‚úÖ ${GREEN}Assets compil√©s avec succ√®s${RESET}"
        echo -e "‚úÖ ${GREEN}${BOLD}Installation termin√©e avec succ√®s${RESET}"
      else
        echo -e "‚ùå ${RED}Erreur lors de la compilation des assets${RESET}"
      fi
    fi
  else
    echo -e "‚è≠Ô∏è  √âtape ignor√©e. Vous pouvez lancer manuellement :"
    echo -e "   ${BOLD}docker exec ${PROJECT_NAME}_php composer install --working-dir=/var/www/html${RESET}"
    echo -e "   ${BOLD}docker exec -u node ${PROJECT_NAME}_node bash /var/www/html/tools/assets/build.sh${RESET}"
  fi
fi

########################################
# √âtape 13 : Installation CLI de PrestaShop
########################################

if [[ "$DOWNLOAD_PS" =~ ^[Yy]$ ]] && [[ "$START_DOCKER" =~ ^[Yy]$ ]] && [[ "$RUN_INSTALL" =~ ^[Yy]$ ]]; then
  echo ""
  if [ "$AUTO_MODE" = true ]; then
    INSTALL_CLI="y"
    echo -e "üõ†Ô∏è  ${BOLD}Installation de PrestaShop via CLI...${RESET} (auto)"
  else
    read -r -p "üõ†Ô∏è  Souhaitez-vous installer PrestaShop via CLI maintenant ? (y/N) " INSTALL_CLI
  fi

  if [[ "$INSTALL_CLI" =~ ^[Yy]$ ]]; then
    if [ "$AUTO_MODE" != true ]; then
      echo -e "üõ†Ô∏è  ${BOLD}Installation de PrestaShop via CLI...${RESET}"
    fi

    # Construire le domaine avec le port HTTP
    SHOP_DOMAIN="localhost:${WEB_HTTP_PORT}"

    # Lancer l'installation CLI
    docker exec "${PROJECT_NAME}_php" php install-dev/index_cli.php \
      --domain="$SHOP_DOMAIN" \
      --db_server="${PROJECT_NAME}_db" \
      --db_name="$DB_NAME" \
      --db_user="$DB_USER" \
      --db_password="$DB_PASSWORD" \
      --prefix=ps_ \
      --email="$ADMIN_EMAIL" \
      --password="$ADMIN_PASSWORD" \
      --language="$SHOP_LANGUAGE" \
      --timezone="$SHOP_TIMEZONE" \
      --theme="$THEME_NAME"

    if [ $? -eq 0 ]; then
      echo ""
      echo -e "‚úÖ ${GREEN}${BOLD}PrestaShop install√© avec succ√®s !${RESET}"
      echo ""
      echo -e "üåê ${BOLD}Acc√®s au shop :${RESET}"
      echo -e "   Front Office : ${CYAN}http://localhost:${WEB_HTTP_PORT}${RESET}"
      echo -e "   Back Office  : ${CYAN}http://localhost:${WEB_HTTP_PORT}/admin-dev${RESET}"
      echo ""
      echo -e "üë§ ${BOLD}Identifiants administrateur :${RESET}"
      echo -e "   Email        : ${GREEN}${ADMIN_EMAIL}${RESET}"
      echo -e "   Mot de passe : ${GREEN}${ADMIN_PASSWORD}${RESET}"
      echo ""

      # V√©rifier et importer les types d'images du th√®me si n√©cessaire
      echo ""
      echo -e "üñºÔ∏è  ${BOLD}V√©rification des types d'images du th√®me...${RESET}"
      IMPORT_SCRIPT="$SCRIPT_DIR/../lib/import-theme-image-types.php"
      docker cp "$IMPORT_SCRIPT" "${PROJECT_NAME}_php:/tmp/import-theme-image-types.php" >/dev/null 2>&1
      IMPORT_RESULT=$(docker exec "${PROJECT_NAME}_php" bash -c "php /tmp/import-theme-image-types.php '$THEME_NAME' 2>&1 && rm -f /tmp/import-theme-image-types.php")

      if echo "$IMPORT_RESULT" | grep -q "SUCCESS"; then
        IMPORTED_COUNT=$(echo "$IMPORT_RESULT" | grep -oP 'Imported \K\d+')
        if [ "$IMPORTED_COUNT" -gt 0 ]; then
          echo -e "‚úÖ ${GREEN}${IMPORTED_COUNT} types d'images import√©s depuis le th√®me${RESET}"
        else
          echo -e "‚úÖ ${GREEN}Types d'images d√©j√† configur√©s${RESET}"
        fi
      fi

      # Activer le th√®me (fallback au cas o√π --theme CLI n'a pas fonctionn√©)
      echo ""
      echo -e "üé® ${BOLD}Activation du th√®me...${RESET}"
      ACTIVATE_SCRIPT="$SCRIPT_DIR/../lib/activate-theme.php"
      docker cp "$ACTIVATE_SCRIPT" "${PROJECT_NAME}_php:/tmp/activate-theme.php" >/dev/null 2>&1
      ACTIVATE_RESULT=$(docker exec "${PROJECT_NAME}_php" bash -c "php /tmp/activate-theme.php '$THEME_NAME' 2>&1 && rm -f /tmp/activate-theme.php")

      if echo "$ACTIVATE_RESULT" | grep -q "SUCCESS"; then
        echo -e "‚úÖ ${GREEN}Th√®me activ√© avec succ√®s${RESET}"
      fi

      # Supprimer le dossier install-dev pour s√©curit√©
      echo ""
      echo -e "üîí Suppression du dossier install-dev pour s√©curit√©..."
      docker exec "${PROJECT_NAME}_php" rm -rf /var/www/html/install-dev
      echo -e "‚úÖ ${GREEN}Dossier install-dev supprim√©${RESET}"

      ########################################
      # √âtape 14 : Mise √† jour des modules
      ########################################
      echo ""
      if [ "$AUTO_MODE" = true ]; then
        UPGRADE_MODULES="y"
        echo -e "üì¶ ${BOLD}Mise √† jour des modules PrestaShop...${RESET} (auto)"
      else
        read -r -p "üì¶ Souhaitez-vous mettre √† jour les modules PrestaShop maintenant ? (y/N) " UPGRADE_MODULES
      fi

      if [[ "$UPGRADE_MODULES" =~ ^[Yy]$ ]]; then
        # Utiliser le script d√©di√© √† la mise √† jour des modules
        if [ "$AUTO_MODE" = true ]; then
          bash "$SCRIPT_DIR/prestashop-module-update" "$PROJECT_NAME" --auto
        else
          bash "$SCRIPT_DIR/prestashop-module-update" "$PROJECT_NAME"
        fi
      else
        echo -e "‚è≠Ô∏è  √âtape ignor√©e. Vous pourrez mettre √† jour les modules depuis le Back Office"
      fi

    else
      echo -e "‚ùå ${RED}Erreur lors de l'installation CLI${RESET}"
      echo -e "   Vous pouvez r√©essayer manuellement ou utiliser l'interface web :"
      echo -e "   ${CYAN}http://localhost:${WEB_HTTP_PORT}/install-dev${RESET}"
    fi
  else
    echo -e "‚è≠Ô∏è  √âtape ignor√©e. Vous pouvez installer manuellement :"
    echo -e "   ‚Ä¢ Via CLI : ${BOLD}docker exec ${PROJECT_NAME}_php php install-dev/index_cli.php [options]${RESET}"
    echo -e "   ‚Ä¢ Via Web : ${CYAN}http://localhost:${WEB_HTTP_PORT}/install-dev${RESET}"
  fi
fi
